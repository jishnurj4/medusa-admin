{"version":3,"file":"toast.js","sourceRoot":"","sources":["../../../src/utils/toast.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Toast } from \"@/components/toast\"\nimport { ToastAction, ToastVariant, ToasterPosition } from \"@/types\"\nimport * as React from \"react\"\nimport { toast as toastFn } from \"sonner\"\n\ninterface BaseToastProps {\n  id?: string | number\n  position?: ToasterPosition\n  dismissable?: boolean\n  dismissLabel?: string\n  duration?: number\n}\n\ninterface ToastProps extends BaseToastProps {\n  description?: string\n  action?: ToastAction\n}\n\nfunction create(variant: ToastVariant, title: string, props: ToastProps = {}) {\n  return toastFn.custom(\n    (t) => {\n      return (\n        <Toast\n          id={props.id || t}\n          title={title}\n          description={props.description}\n          onDismiss={\n            props.dismissable ? () => toastFn.dismiss(props.id || t) : undefined\n          }\n          dismissLabel={props.dismissLabel}\n          variant={variant}\n          action={props.action}\n        />\n      )\n    },\n    {\n      id: props.id,\n      position: props.position,\n      dismissible: props.dismissable,\n    }\n  )\n}\n\nfunction message(\n  /**\n   * The title of the toast.\n   */\n  title: string,\n  /**\n   * The props of the toast.\n   */\n  props: ToastProps = {}\n) {\n  return create(\"message\", title, props)\n}\n\nfunction info(\n  /**\n   * The title of the toast.\n   */ title: string,\n  /**\n   * The props of the toast.\n   */\n  props: ToastProps = {}\n) {\n  return create(\"info\", title, props)\n}\n\nfunction error(\n  /**\n   * The title of the toast.\n   */ title: string,\n  /**\n   * The props of the toast.\n   */\n  props: ToastProps = {}\n) {\n  return create(\"error\", title, props)\n}\n\nfunction success(\n  /**\n   * The title of the toast.\n   */ title: string,\n  /**\n   * The props of the toast.\n   */\n  props: ToastProps = {}\n) {\n  return create(\"success\", title, props)\n}\n\nfunction warning(\n  /**\n   * The title of the toast.\n   */ title: string,\n  /**\n   * The props of the toast.\n   */\n  props: ToastProps = {}\n) {\n  return create(\"warning\", title, props)\n}\n\ntype LoadingToastProps = Omit<ToastProps, \"dismissable\" | \"dismissLabel\">\n\nfunction loading\n/**\n * The title of the toast.\n */(\n  title: string,\n  /**\n   * The props of the toast.\n   */\n  props: ToastProps = {}\n) {\n  return create(\"loading\", title, { ...props, dismissable: false })\n}\n\ntype PromiseStateProps =\n  | string\n  | {\n      title: string\n      description?: string\n    }\n\ninterface PromiseToastProps extends BaseToastProps {\n  loading: PromiseStateProps\n  success: PromiseStateProps\n  error: PromiseStateProps\n}\n\nfunction createUniqueID() {\n  return Math.random().toString(36).slice(2, 8)\n}\n\nasync function promise<TData>(\n  /**\n   * The promise to be resolved.\n   */\n  promise: Promise<TData> | (() => Promise<TData>),\n  /**\n   * The props of the toast.\n   */\n  props: PromiseToastProps\n) {\n  let id: string | number | undefined = props.id || createUniqueID()\n  let shouldDismiss = id !== undefined\n\n  id = create(\n    \"loading\",\n    typeof props.loading === \"string\" ? props.loading : props.loading.title,\n    {\n      id: id,\n      position: props.position,\n      description:\n        typeof props.loading === \"string\"\n          ? undefined\n          : props.loading.description,\n      duration: Infinity,\n    }\n  )\n\n  const p = promise instanceof Promise ? promise : promise()\n\n  p.then(() => {\n    shouldDismiss = false\n    create(\n      \"success\",\n      typeof props.success === \"string\" ? props.success : props.success.title,\n      {\n        id: id,\n        position: props.position,\n        description:\n          typeof props.success === \"string\"\n            ? undefined\n            : props.success.description,\n      }\n    )\n  })\n    .catch(() => {\n      shouldDismiss = false\n      create(\n        \"error\",\n        typeof props.error === \"string\" ? props.error : props.error.title,\n        {\n          id: id,\n          position: props.position,\n          description:\n            typeof props.error === \"string\"\n              ? undefined\n              : props.error.description,\n        }\n      )\n    })\n    .finally(() => {\n      if (shouldDismiss) {\n        toastFn.dismiss(id)\n        id = undefined\n      }\n    })\n\n  return id\n}\n\nexport const toast = Object.assign(message, {\n  info,\n  error,\n  warning,\n  success,\n  promise,\n  loading,\n  dismiss: toastFn.dismiss,\n})\n"]}